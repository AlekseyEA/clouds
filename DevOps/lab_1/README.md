# Лабораторная работа 1
## Задание:
* Должен работать по https c сертификатом
* Настроить принудительное перенаправление HTTP-запросов (порт 80) на HTTPS (порт 443) для обеспечения безопасного соединения.
* Использовать alias для создания псевдонимов путей к файлам или каталогам на сервере.
* Настроить виртуальные хосты для обслуживания нескольких доменных имен на одном сервере.

## Установка nginx.
Устанавливаем nginx на компьютер c ОС Windows 10. Cкачиваем с [сайта](https://nginx.org/ru/download.html) версию 1.26.3 и распаковываем скачанный zip-архив. Внутри него находится приложение nginx.exe, а также конфигурационный файл nginx.conf, с ним и будет проходить работа далее. Для проверки, запустился ли nginx, можно посетить URL [http://localhost](http://localhost).
![image](https://github.com/user-attachments/assets/9786f1b4-f057-4abe-bbbe-cbd39a7fd4e9)
## Создание двух простых проектов.
Создадим два простых одностраничных сайта с 1 картинкой и 1 блоком текста (в репозитории project-1, project-2).
Сайты будут находится по домену project-1.ru и project-2.ru.
Теперь домены требуется добавить в файл hosts (C:\Windows\System32\drivers\etc\hosts), так как наши запросы должны быть локальны.

![image](https://github.com/user-attachments/assets/4578b34a-483d-4a02-9c12-3a5e08811f40)
## Создание собственного SSL-сертификата.
Для создания HTTPS соединения требуется создать SSL-сертификат. Переходим на страницу загрузки дистрибутива [OpenSSL](https://slproweb.com/products/Win32OpenSSL.html) и устанавливаем файл .exe (v3.3.3).
После установк переходим в директорию с программой openssl.exe и запускаем через командную строку следующую команду:
![image](https://github.com/user-attachments/assets/d33b9a7a-a671-481d-a815-bc719a27490c)
Аналогично создаем сертификат для 2 сайта.
## Принудительное перенаправление запросов на HTTPS.
В конфигурационный файл nginx.conf вносим следующие изменения:

В блок http { ... } начнем прописывать следующие строки:

![image](https://github.com/user-attachments/assets/e60645c5-fac9-4273-8a57-a840b7197d3d)

Этот блок требуется для автоматического перехвата всего http трафика.
Порт 80 - значит оно будет слушать http трафик.

Теперь добавим еще 2 блок, для projet-1.ru и project-2.ru.
![image](https://github.com/user-attachments/assets/ac573449-c7f4-4429-bfc8-2646e1e45262)
Порт 443 - означает, что это принимает SSl-соединения для сайтов projet-1.ru и project-2.ru.

После сохранения изменений в конфигурационном файле, если nginx уже был запущен, необходимо в командной строке Windows прописать команду nginx -s reload для запуска новых рабочих процессов с новой конфигурацией.

Теперь мы можем зайти на два сайта и увидеть их сертификаты, но поскольку они выданы нами самостоятельно, то сам браузер будет в недоумении.
![image](https://github.com/user-attachments/assets/bbbdfea8-6626-44a5-9988-004c913a7531)
![image](https://github.com/user-attachments/assets/cc14743a-d179-48aa-8cd8-88d09fc39cfa)

## Использование alias
Будем использовать alias для создания псевдонимов путей к нашим изображениям на сайтах.

В блоки server {...} для двух проектов добавим следующие строки.
![image](https://github.com/user-attachments/assets/1171f888-c2f1-4932-a1b0-af6419cf9957)
![image](https://github.com/user-attachments/assets/733c19ee-9d31-4b7a-b37f-c8c247915953)

Теперь при введение следующего запроса в строку, мы получим изображение лежащее по этому пути.
![image](https://github.com/user-attachments/assets/8dc5a0cd-4956-4128-b0b5-b427c121120a)

## Вывод
У нас есть два проекта на одном сервере. Оба доступны по https. Веб сервер перенаправляет на нужный проект и переопределяет путь для фотографий.
